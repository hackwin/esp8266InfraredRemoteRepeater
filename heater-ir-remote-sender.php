<?php

  $power = "143,1312,354,1316,348,476,1220,1316,352,1312,360,474,1230,476,1226,474,1230,450,1254,476,1228,476,1226,1314,6918,1316,350,1312,350,448,1246,1314,352,1314,356,476,1226,476,1226,476,1228,476,1228,478,1226,478,1224,1288,6920,1316,348,1312,350,478,1220,1314,350,1314,358,476,1226,478,1226,478,1224,478,1228,452,1250,452,1250,1314,6916,1314,348,1312,350,476,1220,1314,350,1316,356,452,1252,476,1228,476,1226,452,1250,452,1250,478,1224,1288,6918,1314,348,1312,348,452,1244,1314,350,1310,360,452,1250,478,1226,476,1226,478,1226,452,1250,452,1250,1314,6914,1316,348,1312,348,450,1244,1312,350,1288,382,450,1252,452,1252,450,1252,452,1250,452,1250,452,1248,1346;";
  $highLow = "119,1292,370,1316,348,454,1242,1292,374,1292,380,454,1250,454,1250,454,1250,454,1248,1292,380,454,1250,454,7810,1292,372,1258,404,420,1276,1260,406,1258,412,420,1282,420,1282,422,1282,420,1280,1260,412,420,1282,420,7820,1282,384,1276,392,432,1256,1282,388,1276,394,436,1262,442,1260,444,1262,442,1256,1286,392,438,1258,446,7816,1286,386,1276,386,434,1250,1286,386,1278,392,440,1256,446,1258,446,1258,446,1254,1286,420,412,1256,446,7790,1288,384,1278,384,438,1250,1286,388,1274,394,434,1262,440,1264,390,1312,390,1310,1258,414,418,1284,420;";

  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, 'http://10.0.0.89/ir-remote-signal/');
  curl_setopt($ch, CURLOPT_POST, true);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 3);
  curl_setopt($ch, CURLOPT_TIMEOUT, 3);
  
  if(isset($_GET['action'])){
      if($_GET['action'] == 'on'){
          curl_setopt($ch, CURLOPT_POSTFIELDS, 'p='.$power.$highLow);
          $response = curl_exec($ch);        
          echo $response;
      }
      else if($_GET['action'] == 'off'){
          curl_setopt($ch, CURLOPT_POSTFIELDS, 'p'.$power);
          $response = curl_exec($ch);
          echo $response;
      }
  }
  
  curl_close($ch);
  
?>
